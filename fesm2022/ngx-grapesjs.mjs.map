{"version":3,"file":"ngx-grapesjs.mjs","sources":["../../../projects/ngx-grapesjs/src/lib/newsletter-editor/ngx-newsletter-editor.service.ts","../../../projects/ngx-grapesjs/src/lib/editor.component.ts","../../../projects/ngx-grapesjs/src/lib/newsletter-editor/ngx-newsletter-editor.component.ts","../../../projects/ngx-grapesjs/src/lib/webpage-editor/ngx-webgrapesjs.component.ts","../../../projects/ngx-grapesjs/src/lib/ngx-grapesjs.module.ts","../../../projects/ngx-grapesjs/src/public-api.ts","../../../projects/ngx-grapesjs/src/ngx-grapesjs.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NgxNewsletterEditorService {\r\n\r\n  parserHtml = {};\r\n\r\n}\r\n","import { Component, Input } from '@angular/core';\r\n\r\nimport { Config } from './editor.model';\r\n\r\ndeclare var grapesjs: {\r\n  init(options: any): {}\r\n};\r\n\r\n@Component({\r\n  template: ''\r\n})\r\n\r\nexport class NgxEditorComponent {\r\n\r\n  @Input() template = '';\r\n  @Input() storagePrefix = 'gjs-';\r\n\r\n  setup(customConfig: Partial<Config>) {\r\n    const config: Partial<Config> = {\r\n      components: this.template,\r\n      storageManager: {\r\n        id: this.storagePrefix\r\n      }\r\n    };\r\n\r\n    return grapesjs.init({\r\n      ...config,\r\n      ...customConfig\r\n    });\r\n  }\r\n\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\n\r\nimport { CommandSender, NewsletterConfig, NewsletterEditor, TextAction, TextEditor } from './newsletter-editor.model';\r\nimport { NgxNewsletterEditorService } from './ngx-newsletter-editor.service';\r\nimport { Placeholder } from './placeholder.model';\r\nimport { NgxEditorComponent } from '../editor.component';\r\n\r\n@Component({\r\n  selector: 'ngx-grapes-newsletter-editor',\r\n  template: '<div id=\"gjs\"></div>'\r\n})\r\nexport class NgxNewsletterEditorComponent extends NgxEditorComponent implements OnInit {\r\n\r\n  @Input() placeholders: Placeholder[] = [];\r\n\r\n  private editor: NewsletterEditor | undefined;\r\n  private newsletterConfig: Partial<NewsletterConfig> = {\r\n    container: '#gjs',\r\n    plugins: ['grapesjs-preset-newsletter'],\r\n    pluginsOpts: {\r\n      'grapesjs-preset-newsletter': {\r\n        modalTitleImport: 'Import template'\r\n      }\r\n    },\r\n    parser: {\r\n      parserHtml: {}\r\n    }\r\n  };\r\n\r\n  constructor(private ngxNewsletterEditorService: NgxNewsletterEditorService) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit() {\r\n    // setup the default parser. It can be overriden by providing a custom implementation of the ngxNewsletterEditorService\r\n    if (this.newsletterConfig.parser) {\r\n      this.newsletterConfig.parser.parserHtml = this.ngxNewsletterEditorService?.parserHtml;\r\n    }\r\n\r\n    this.editor = this.setup(this.newsletterConfig);\r\n\r\n    this.addButtons();\r\n    this.addPlaceholders();\r\n  }\r\n\r\n  getRawHtml(): string | undefined {\r\n    return this.editor?.runCommand?.('gjs-get-inlined-html');\r\n  }\r\n\r\n  private undo = (editor: NewsletterEditor, sender: CommandSender) => {\r\n    sender.set('active', 0);\r\n    editor.UndoManager?.undo(1);\r\n  };\r\n\r\n  private redo = (editor: NewsletterEditor, sender: CommandSender) => {\r\n    sender.set('active', 0);\r\n    editor.UndoManager?.redo(1);\r\n  };\r\n\r\n  private addButtons() {\r\n    this.editor?.Panels?.addButton('options', [\r\n      {\r\n        id: 'undo',\r\n        className: 'fa fa-undo',\r\n        command: this.undo,\r\n        attributes: {\r\n          title: 'Undo'\r\n        }\r\n      },\r\n      {\r\n        id: 'redo',\r\n        className: 'fa fa-repeat icon-redo',\r\n        command: this.redo,\r\n        attributes: {\r\n          title: 'Redo'\r\n        }\r\n      }\r\n    ]);\r\n  }\r\n\r\n  private addPlaceholders() {\r\n    if (this.placeholders.length) {\r\n      const placeholderSelectOptions = this.placeholders.map(placeholder =>\r\n        `<option\r\n            title=\"${placeholder.description}\"\r\n            data-tooltip-pos=\"bottom\"\r\n            data-tooltip=\"Bold\"\r\n            class=\"gjs-one-color\"\r\n            value=\"<% ${placeholder.value} %>\"\r\n        >\r\n        ${placeholder.name}\r\n        </option>`\r\n      );\r\n\r\n      this.editor?.RichTextEditor?.add('placeholders', {\r\n        icon: `<select class=\"gjs-field gjs-two-color\">\r\n                <option class=\"gjs-one-color\" value=\"\">- Select placeholder -</option>\r\n                ${placeholderSelectOptions}\r\n              </select>\r\n        `,\r\n        event: 'change',\r\n        result: (rte: TextEditor, action: TextAction) => rte.insertHTML(action.btn.firstChild.value),\r\n        update: (_: TextEditor, action: TextAction) => action.btn.firstChild.value = ''\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { NgxEditorComponent } from '../editor.component';\r\nimport { Config } from '../editor.model';\r\n\r\n@Component({\r\n  selector: 'ngx-grapes-webpage-editor',\r\n  template: '<div id=\"gjs\"></div>'\r\n})\r\n\r\nexport class NgxWebpageEditorComponent extends NgxEditorComponent implements OnInit {\r\n\r\n  private webpageConfig: Partial<Config> = {\r\n    container: '#gjs',\r\n    plugins: [\r\n      'grapesjs-preset-webpage',\r\n      'gjs-blocks-basic'\r\n    ],\r\n    pluginsOpts: {\r\n      'grapesjs-preset-webpage': {\r\n        modalTitleImport: 'Import template'\r\n      }\r\n    }\r\n  };\r\n\r\n  ngOnInit() {\r\n    this.setup(this.webpageConfig);\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { NgxNewsletterEditorComponent } from './newsletter-editor/ngx-newsletter-editor.component';\r\nimport { NgxWebpageEditorComponent } from './webpage-editor/ngx-webgrapesjs.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    NgxNewsletterEditorComponent,\r\n    NgxWebpageEditorComponent\r\n  ],\r\n  exports: [\r\n    NgxNewsletterEditorComponent,\r\n    NgxWebpageEditorComponent\r\n  ]\r\n})\r\nexport class NgxGrapesjsModule { }\r\n","/*\r\n * Public API Surface of ngx-grapesjs\r\n */\r\n\r\nexport * from './lib/newsletter-editor/ngx-newsletter-editor.service';\r\nexport * from './lib/newsletter-editor/ngx-newsletter-editor.component';\r\nexport * from './lib/webpage-editor/ngx-webgrapesjs.component';\r\nexport * from './lib/ngx-grapesjs.module';\r\nexport * from './lib/newsletter-editor/placeholder.model';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i1.NgxNewsletterEditorService"],"mappings":"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"}